"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8046],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var t=s(96540);const r={},c=t.createContext(r);function l(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(c.Provider,{value:n},e.children)}},48840:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>o,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"k8s/cluster-api/README","title":"cluster api","description":"- https://cluster-api.sigs.k8s.io/user/quick-start","source":"@site/docs/k8s/cluster-api/README.md","sourceDirName":"k8s/cluster-api","slug":"/k8s/cluster-api/","permalink":"/en/docs/k8s/cluster-api/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/k8s/cluster-api/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"k8s service","permalink":"/en/docs/k8s/Service"},"next":{"title":"cluster api \u58f0\u660e\u5f0f\u90e8\u7f72k8s","permalink":"/en/docs/k8s/cluster-api"}}');var r=s(74848),c=s(28453);const l={},i="cluster api",u={},a=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u521d\u59cb\u5316\u7ba1\u7406\u96c6\u7fa4 / \u5e38\u89c1\u96c6\u7fa4\u7684\u521d\u59cb\u5316 (docker)",id:"\u521d\u59cb\u5316\u7ba1\u7406\u96c6\u7fa4--\u5e38\u89c1\u96c6\u7fa4\u7684\u521d\u59cb\u5316-docker",level:2},{value:"\u90e8\u7f72CNI (\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3)",id:"\u90e8\u7f72cni-\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3",level:3},{value:"\u5220\u9664",id:"\u5220\u9664",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cluster-api",children:"cluster api"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://cluster-api.sigs.k8s.io/user/quick-start",children:"https://cluster-api.sigs.k8s.io/user/quick-start"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u58f0\u660e\u5f0f\u90e8\u7f72k8s\u96c6\u7fa4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7528k8s \u7ba1\u7406k8s"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kind create cluster --config kind-cluster-with-extramounts.yaml\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"m1 \u4e0a\u5b89\u88c5"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"curl -L https://github.com/kubernetes-sigs/cluster-api/releases/download/v1.10.3/clusterctl-darwin-arm64 -o clusterctl\n\n\nchmod +x ./clusterctl\n\nsudo mv ./clusterctl /usr/local/bin/clusterctl\n\nclusterctl version\n\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u521d\u59cb\u5316\u7ba1\u7406\u96c6\u7fa4--\u5e38\u89c1\u96c6\u7fa4\u7684\u521d\u59cb\u5316-docker",children:"\u521d\u59cb\u5316\u7ba1\u7406\u96c6\u7fa4 / \u5e38\u89c1\u96c6\u7fa4\u7684\u521d\u59cb\u5316 (docker)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"#clusterctl init\n\n# Enable the experimental Cluster topology feature.\nexport CLUSTER_TOPOLOGY=true\n\n# Initialize the management cluster\nclusterctl init --infrastructure docker\n\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u751f\u6210\u5de5\u4f5c\u96c6\u7fa4\u914d\u7f6e"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"clusterctl generate cluster\n\u6216\u8005\u4fdd\u5b58\u5230\u6587\u4ef6\n\nclusterctl generate cluster capi-quickstart --flavor development \\\n--kubernetes-version v1.33.0 \\\n--control-plane-machine-count=3 \\\n--worker-machine-count=3 \\\n> capi-quickstart.yaml\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5e94\u7528\u5de5\u4f5c\u8d1f\u8f7d\u96c6\u7fa4\n\u51c6\u5907\u5c31\u7eea\u540e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u5e94\u7528\u96c6\u7fa4\u6e05\u5355\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f capi-quickstart.yaml\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\nkubectl get cluster\nclusterctl describe cluster capi-quickstart"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u8981\u9a8c\u8bc1\u7b2c\u4e00\u4e2a control plane \u662f\u5426\u5df2\u542f\u52a8\uff1a"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kubectl get kubeadmcontrolplane\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u90e8\u7f72cni-\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3",children:"\u90e8\u7f72CNI (\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3)"}),"\n",(0,r.jsx)(n.h2,{id:"\u5220\u9664",children:"\u5220\u9664"}),"\n",(0,r.jsx)(n.p,{children:"clusterctl delete --infrastructure docker\n\u6216\u8005\nclusterctl delete --all"})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);