"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9087],{9656:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"k8s/kind","title":"kind (k8s in docker)","description":"\u5728\u5bb9\u5668\u91cc\u8fd0\u884cKubernetes","source":"@site/docs/k8s/kind.md","sourceDirName":"k8s","slug":"/k8s/kind","permalink":"/en/docs/k8s/kind","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/k8s/kind.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"k3d","permalink":"/en/docs/k8s/k3d"},"next":{"title":"kubeadm \u7ba1\u7406\u96c6\u7fa4","permalink":"/en/docs/k8s/kubeadm/0.0.0-index"}}');var r=l(74848),d=l(28453);const s={},c="kind (k8s in docker)",o={},t=[{value:"\u5b89\u88c5kind",id:"\u5b89\u88c5kind",level:2},{value:"kind",id:"kind",level:2},{value:"\u63a7\u5236\u5e73\u9762\u8282\u70b9 Control planel",id:"\u63a7\u5236\u5e73\u9762\u8282\u70b9-control-planel",level:2},{value:"\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u96c6\u7fa4",id:"\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u96c6\u7fa4",level:2},{value:"\u52a0\u8f7d\u955c\u50cf\u5230\u96c6\u7fa4\u8282\u70b9",id:"\u52a0\u8f7d\u955c\u50cf\u5230\u96c6\u7fa4\u8282\u70b9",level:2},{value:"\u5728mac\u4e0a\u8981\u5173\u95eddocker desktop \u7684 <code>Use containerd for pulling and storing images</code> ,\u8fd9\u4e2a\u662f\u6784\u5efa\u591a\u5e73\u53f0\u955c\u50cf\u65f6\u8981\u6253\u5f00\u7684",id:"\u5728mac\u4e0a\u8981\u5173\u95eddocker-desktop-\u7684-use-containerd-for-pulling-and-storing-images-\u8fd9\u4e2a\u662f\u6784\u5efa\u591a\u5e73\u53f0\u955c\u50cf\u65f6\u8981\u6253\u5f00\u7684",level:3},{value:"\u90e8\u7f72\u955c\u50cf",id:"\u90e8\u7f72\u955c\u50cf",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"kind-k8s-in-docker",children:"kind (k8s in docker)"})}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u5bb9\u5668\u91cc\u8fd0\u884cKubernetes"}),"\n",(0,r.jsx)(e.h2,{id:"\u5b89\u88c5kind",children:"\u5b89\u88c5kind"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u5b89\u88c5"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"brew install kind\n"})}),"\n",(0,r.jsx)(e.h2,{id:"kind",children:"kind"}),"\n",(0,r.jsx)(e.p,{children:"k8s in docker"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"brew install kind\nkind create cluster\nkind delete cluster\nkind get clusters \n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u63a7\u5236\u5e73\u9762\u8282\u70b9-control-planel",children:"\u63a7\u5236\u5e73\u9762\u8282\u70b9 Control planel"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u521b\u5efa"}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u6307\u5b9a\u540d\u79f0,\u9ed8\u8ba4\u4e3akind"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:" kind create cluster --name dev \n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u67e5\u770b\u5168\u90e8\u96c6\u7fa4"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kind get clusters\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e3a\u4e86\u4e0e\u7279\u5b9a\u96c6\u4e92\uff0c\u60a8\u53ea\u9700\u6307\u5b9a cluster name \u4f5c\u4e3a\u4e0a\u4e0b\u6587\u4e2d\u7684 Context\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kubectl cluster-info --context kind-dev\n\nkubectl cluster-info --context kind-kind\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5220\u9664"}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u6307\u5b9a\u540d\u79f0, \u9ed8\u8ba4\u5220\u9664kind"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kind delete cluster --name dev \n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u96c6\u7fa4",children:"\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u96c6\u7fa4"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8fd0\u884c\u547d\u4ee4"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kind create cluster --config kind-example-config.yaml\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"kind-example-config.yaml"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"# a cluster with 1 control-plane nodes and 2 workers\nkind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\nnodes:\n    - role: control-plane\n    - role: worker\n    - role: worker\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u9ad8\u53ef\u4ee5\u96c6\u7fa4"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"# a cluster with 3 control-plane nodes and 3 workers\nkind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\nnodes:\n    - role: control-plane\n    - role: control-plane\n    - role: control-plane\n    - role: worker\n    - role: worker\n    - role: worker\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u52a0\u8f7d\u955c\u50cf\u5230\u96c6\u7fa4\u8282\u70b9",children:"\u52a0\u8f7d\u955c\u50cf\u5230\u96c6\u7fa4\u8282\u70b9"}),"\n",(0,r.jsxs)(e.h3,{id:"\u5728mac\u4e0a\u8981\u5173\u95eddocker-desktop-\u7684-use-containerd-for-pulling-and-storing-images-\u8fd9\u4e2a\u662f\u6784\u5efa\u591a\u5e73\u53f0\u955c\u50cf\u65f6\u8981\u6253\u5f00\u7684",children:["\u5728mac\u4e0a\u8981\u5173\u95eddocker desktop \u7684 ",(0,r.jsx)(e.code,{children:"Use containerd for pulling and storing images"})," ,\u8fd9\u4e2a\u662f\u6784\u5efa\u591a\u5e73\u53f0\u955c\u50cf\u65f6\u8981\u6253\u5f00\u7684"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u52a0\u8f7d nginx:1.29.0 \u955c\u50cf\u5230 kind \u4e2d"}),"\n",(0,r.jsx)(e.li,{children:"docker pull nginx:1.29.0"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kubectl config use-context kind-kind\nkind load docker-image nginx:1.29.0 --name kind\n\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u90e8\u7f72\u955c\u50cf",children:"\u90e8\u7f72\u955c\u50cf"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7f16\u5199 Deployment"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"nginx-deployment.yml \n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5e94\u7528"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kubectl apply -f nginx-deployment.yml\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u67e5\u770b\u90e8\u7f72\u7ed3\u679c"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"kubectl get pods\n"})})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},28453:(n,e,l)=>{l.d(e,{R:()=>s,x:()=>c});var i=l(96540);const r={},d=i.createContext(r);function s(n){const e=i.useContext(d);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),i.createElement(d.Provider,{value:e},n.children)}}}]);