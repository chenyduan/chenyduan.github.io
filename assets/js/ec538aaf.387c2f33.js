"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[4231],{23561:n=>{n.exports=JSON.parse('{"permalink":"/blog/2024/Java\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u516d\u79cd\u65b9\u5f0f","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2024/Java\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u516d\u79cd\u65b9\u5f0f.md","source":"@site/blog/2024/Java\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u516d\u79cd\u65b9\u5f0f.md","title":"2024/Java\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u516d\u79cd\u65b9\u5f0f","description":"~~~","date":"2025-09-21T13:09:30.000Z","tags":[],"readingTime":3.68,"hasTruncateMarker":false,"authors":[],"frontMatter":{},"unlisted":false,"prevItem":{"title":"2024/Java\u5bc6\u5c01\u7c7b","permalink":"/blog/2024/Java\u5bc6\u5c01\u7c7b"},"nextItem":{"title":"2024/Jenkins","permalink":"/blog/2024/Jenkins"}}')},28453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>l});var r=t(96540);const a={},i=r.createContext(a);function s(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),r.createElement(i.Provider,{value:e},n.children)}},75685:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var r=t(23561),a=t(74848),i=t(28453);const s={},l=void 0,o={authorsImageUrls:[]},c=[];function m(n){const e={code:"code",pre:"pre",...(0,i.R)(),...n.components};return(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'\n\n\n\n\nimport org.junit.Test;\n\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.stream.Stream;\n\npublic class FileReadTest {\n\n\n    /**\n     * \u7b2c\u4e00\u79cd\u65b9\u5f0f\u662fScanner\uff0c\u4eceJDK1.5\u5f00\u59cb\u63d0\u4f9b\u7684API\uff0c\u7279\u70b9\u662f\u53ef\u4ee5\u6309\u884c\u8bfb\u53d6\u3001\u6309\u5206\u5272\u7b26\u53bb\u8bfb\u53d6\u6587\u4ef6\u6570\u636e\uff0c\u65e2\u53ef\u4ee5\u8bfb\u53d6String\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u8bfb\u53d6Int\u7c7b\u578b\u3001Long\u7c7b\u578b\u7b49\u57fa\u7840\u6570\u636e\u7c7b\u578b\u7684\u6570\u636e\u3002\n     *\n     * @throws IOException\n     */\n\n    @Test\n    public void testReadFile1() throws IOException {\n        //\u6587\u4ef6\u5185\u5bb9\uff1a\n        String fileName = "D:\\\\1111.txt";\n\n        try (Scanner sc = new Scanner(new FileReader(fileName))) {\n            while (sc.hasNextLine()) {  //\u6309\u884c\u8bfb\u53d6\u5b57\u7b26\u4e32\n                String line = sc.nextLine();\n                System.out.println(line);\n            }\n        }\n\n        try (Scanner sc = new Scanner(new FileReader(fileName))) {\n            sc.useDelimiter("\\\\|");  //\u5206\u9694\u7b26\n            while (sc.hasNext()) {   //\u6309\u5206\u9694\u7b26\u8bfb\u53d6\u5b57\u7b26\u4e32\n                String str = sc.next();\n                System.out.println(str);\n            }\n        }\n\n        //sc.hasNextInt() \u3001hasNextFloat() \u3001\u57fa\u7840\u6570\u636e\u7c7b\u578b\u7b49\u7b49\u7b49\u7b49\u3002\n        //\u6587\u4ef6\u5185\u5bb9\uff1a1|2\n        fileName = "D:\\\\1111.txt";\n        try (Scanner sc = new Scanner(new FileReader(fileName))) {\n            sc.useDelimiter("\\\\|");  //\u5206\u9694\u7b26\n            while (sc.hasNextInt()) {   //\u6309\u5206\u9694\u7b26\u8bfb\u53d6Int\n                int intValue = sc.nextInt();\n                System.out.println(intValue);\n            }\n        }\n    }\n\n\n    /**\n     * \u5982\u679c\u4f60\u662f\u9700\u8981\u6309\u884c\u53bb\u5904\u7406\u6570\u636e\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u6211\u63a8\u8350\u5927\u5bb6\u53bb\u4f7f\u7528\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u4ee3\u7801\u7b80\u6d01\uff0c\u4f7f\u7528java 8\u7684Stream\u6d41\u5c06\u6587\u4ef6\u8bfb\u53d6\u4e0e\u6587\u4ef6\u5904\u7406\u6709\u673a\u878d\u5408\u3002\n     *\n     * @throws IOException\n     */\n    @Test\n    public void testReadFile2() throws IOException {\n        String fileName = "D:\\\\1111.txt";\n\n        // \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u5230Stream\u6d41\u4e2d\uff0c\u6309\u884c\u8bfb\u53d6\n        Stream<String> lines = Files.lines(Paths.get(fileName));\n\n        // \u968f\u673a\u884c\u987a\u5e8f\u8fdb\u884c\u6570\u636e\u5904\u7406\n        lines.forEach(ele -> {\n            System.out.println(ele);\n        });\n    }\n\n    /*\n    forEach\u83b7\u53d6Stream\u6d41\u4e2d\u7684\u884c\u6570\u636e\u4e0d\u80fd\u4fdd\u8bc1\u987a\u5e8f\uff0c\u4f46\u901f\u5ea6\u5feb\u3002\u5982\u679c\u4f60\u60f3\u6309\u987a\u5e8f\u53bb\u5904\u7406\u6587\u4ef6\u4e2d\u7684\u884c\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528forEachOrdered\uff0c\u4f46\u5904\u7406\u6548\u7387\u4f1a\u4e0b\u964d\u3002\n\n// \u6309\u6587\u4ef6\u884c\u987a\u5e8f\u8fdb\u884c\u5904\u7406\nlines.forEachOrdered(System.out::println);\n\u6216\u8005\u5229\u7528CPU\u591a\u548c\u7684\u80fd\u529b\uff0c\u8fdb\u884c\u6570\u636e\u7684\u5e76\u884c\u5904\u7406parallel()\uff0c\u9002\u5408\u6bd4\u8f83\u5927\u7684\u6587\u4ef6\u3002\n\n// \u6309\u6587\u4ef6\u884c\u987a\u5e8f\u8fdb\u884c\u5904\u7406\nlines.parallel().forEachOrdered(System.out::println);\n\u4e5f\u53ef\u4ee5\u628aStream<String>\u8f6c\u6362\u6210List<String>,\u4f46\u662f\u8981\u6ce8\u610f\u8fd9\u610f\u5473\u7740\u4f60\u8981\u5c06\u6240\u6709\u7684\u6570\u636e\u4e00\u6b21\u6027\u52a0\u8f7d\u5230\u5185\u5b58\uff0c\u8981\u6ce8\u610fjava.lang.OutOfMemoryError\n\n// \u8f6c\u6362\u6210List<String>, \u8981\u6ce8\u610fjava.lang.OutOfMemoryError: Java heap space\nList<String> collect = lines.collect(Collectors.toList());\n\n     */\n\n\n    /**\n     * \u8fd9\u79cd\u65b9\u6cd5\u4ecd\u7136\u662fjava8 \u4e3a\u6211\u4eec\u63d0\u4f9b\u7684\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u9700\u8981Stream<String>,\u6211\u4eec\u60f3\u76f4\u63a5\u6309\u884c\u8bfb\u53d6\u6587\u4ef6\u83b7\u53d6\u5230\u4e00\u4e2aList<String>\uff0c\u5c31\u91c7\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u3002\u540c\u6837\u7684\u95ee\u9898\uff1a\u8fd9\u610f\u5473\u7740\u4f60\u8981\u5c06\u6240\u6709\u7684\u6570\u636e\u4e00\u6b21\u6027\u52a0\u8f7d\u5230\u5185\u5b58\uff0c\u8981\u6ce8\u610fjava.lang.OutOfMemoryError\n     *\n     * @throws IOException\n     */\n\n    @Test\n    public void testReadFile3() throws IOException {\n        String fileName = "D:\\\\1111.txt";\n\n        // \u8f6c\u6362\u6210List<String>, \u8981\u6ce8\u610fjava.lang.OutOfMemoryError: Java heap space\n        List<String> lines = Files.readAllLines(Paths.get(fileName),\n                StandardCharsets.UTF_8);\n        lines.forEach(System.out::println);\n\n    }\n\n\n    /**\n     * \u4ece java11\u5f00\u59cb\uff0c\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u6b21\u6027\u8bfb\u53d6\u4e00\u4e2a\u6587\u4ef6\u7684\u65b9\u6cd5\u3002\u6587\u4ef6\u4e0d\u80fd\u8d85\u8fc72G\uff0c\u540c\u65f6\u8981\u6ce8\u610f\u4f60\u7684\u670d\u52a1\u5668\u53caJVM\u5185\u5b58\u3002\u8fd9\u79cd\u65b9\u6cd5\u9002\u5408\u5feb\u901f\u8bfb\u53d6\u5c0f\u6587\u672c\u6587\u4ef6\u3002\n     *\n     * @throws IOException\n     */\n\n    @Test\n    public void testReadFile4() throws IOException {\n        String fileName = "D:\\\\1111.txt";\n\n        // java 11 \u5f00\u59cb\u63d0\u4f9b\u7684\u65b9\u6cd5\uff0c\u8bfb\u53d6\u6587\u4ef6\u4e0d\u80fd\u8d85\u8fc72G\uff0c\u4e0e\u4f60\u7684\u5185\u5b58\u606f\u606f\u76f8\u5173\n        String s = Files.readString(Paths.get(fileName));\n        System.out.println(s);\n    }\n\n\n    /**\n     * \u5982\u679c\u4f60\u6ca1\u6709JDK11\uff08readAllBytes()\u59cb\u4e8eJDK7\uff09,\u4ecd\u7136\u60f3\u4e00\u6b21\u6027\u7684\u5feb\u901f\u8bfb\u53d6\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u8f6c\u4e3aString\uff0c\u8be5\u600e\u4e48\u529e\uff1f\u5148\u5c06\u6570\u636e\u8bfb\u53d6\u4e3a\u4e8c\u8fdb\u5236\u6570\u7ec4\uff0c\u7136\u540e\u8f6c\u6362\u6210String\u5185\u5bb9\u3002\u8fd9\u79cd\u65b9\u6cd5\u9002\u5408\u5728\u6ca1\u6709JDK11\u7684\u8bf7\u5f00\u7ed9\u4f60\u4e0b\uff0c\u5feb\u901f\u8bfb\u53d6\u5c0f\u6587\u672c\u6587\u4ef6\u3002\n     *\n     * @throws IOException\n     */\n\n    @Test\n    public void testReadFile5() throws IOException {\n        String fileName = "D:\\\\1111.txt";\n\n        //\u5982\u679c\u662fJDK11\u7528\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u5982\u679c\u4e0d\u662f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u5f88\u5bb9\u6613\n        byte[] bytes = Files.readAllBytes(Paths.get(fileName));\n\n        String content = new String(bytes, StandardCharsets.UTF_8);\n        System.out.println(content);\n    }\n\n\n    /**\n     * \u6700\u540e\u4e00\u79cd\u5c31\u662f\u7ecf\u5178\u7684\u7ba1\u9053\u6d41\u7684\u65b9\u5f0f\n     *\n     * @throws IOException\n     */\n    @Test\n    public void testReadFile6() throws IOException {\n        String fileName = "D:\\\\1111.txt";\n\n        // \u5e26\u7f13\u51b2\u7684\u6d41\u8bfb\u53d6\uff0c\u9ed8\u8ba4\u7f13\u51b2\u533a8k\n        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                System.out.println(line);\n            }\n        }\n\n        //java 8\u4e2d\u8fd9\u6837\u5199\u4e5f\u53ef\u4ee5\n        try (BufferedReader br = Files.newBufferedReader(Paths.get(fileName))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                System.out.println(line);\n            }\n        }\n\n    }\n\n\n    /*\n    \u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u901a\u8fc7\u7ba1\u9053\u6d41\u5d4c\u5957\u7684\u65b9\u5f0f\uff0c\u7ec4\u5408\u4f7f\u7528\uff0c\u6bd4\u8f83\u7075\u6d3b\u3002\u6bd4\u5982\u6211\u4eec\n\u60f3\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6java Object\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u524d\u63d0\u662f\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u662fObjectOutputStream\u5199\u5165\u7684\u6570\u636e\uff0c\u624d\u53ef\u4ee5\u7528ObjectInputStream\u6765\u8bfb\u53d6\u3002\n\ntry (FileInputStream fis = new FileInputStream(fileName);\n     ObjectInputStream ois = new ObjectInputStream(fis)){\n   ois.readObject();\n}\n\n     */\n\n}\n\n\n\n'})})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(m,{...n})}):m(n)}}}]);